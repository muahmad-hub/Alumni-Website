{% extends "alumni/layout.html" %}
{% load static %}

{% block extra_css %}
     <link href="{% static 'alumni/css/profile.css' %}" rel="stylesheet">
     <link rel="icon" href="/path/to/your/favicon.ico" type="image/x-icon">
{% endblock %}

{% block title %}
    Edit Profile
{% endblock %}

{% block main %}

    <div class="container-fluid p-0 profile-img-container bg-maroon-light mb-5 text-center">
        <div style="position: relative; display: inline-block;">
        
            <button type="button" class="profile_pic_button open_modal">
                <img src="{% if profile.profile_url %}{{ profile.profile_url }}{% else %}{% static 'alumni/images/profile_image.jpg' %}{% endif %}" 
                    alt="Profile Picture" 
                    class="img-fluid rounded-circle profilePic">
            </button>
            <h3 class="mt-3 text-maroon"><span class="name_text">
                {{ profile.name|default:"Need to enter Name"}}
                <button class="btn btn-link pencil open_modal" id="name" data-title="First Name" data-placeholder="Enter your first name">
                    <i class="bi bi-pencil"></i>
                </button>
            </span></h3>
            <p class="lead text-dark"> 
                Class of <span class="graduation_year_text">{{ profile.graduation_year|default:"Need to add graduation year" }}
                    <button class="btn btn-link pencil open_modal" id="graduation_year" data-title="Graduation Year" data-placeholder="Enter your graduation year">
                        <i class="bi bi-pencil"></i>
                    </button>
                </span> <strong>â€¢</strong> Student at <span class="university_text">
                    {{ profile.university|default:"Need to enter University" }}
                    <button class="btn btn-link pencil open_modal" id="university" data-title="University" data-placeholder="Enter your university">
                        <i class="bi bi-pencil"></i>
                    </button>  
                </span>
            </p>
        </div>
    </div>

    <div class="container-fluid my-4">
        <div class="row mb-5">
            <div class="col text-center">
                <h4 class="text-maroon mb-3">About Me</h4>
                <p class="px-4 about_me_text">
                    {{ profile.about_me|default:"Need to write about yourself" }}
                    <button class="btn btn-link pencil open_modal" id="about_me" data-title="About" data-placeholder="Write a bit about yourself">
                        <i class="bi bi-pencil"></i>
                    </button> 
                </p>
            </div>
        </div>

        <div class="row text-center justify-content-center">
            <div class="col-md-5 mb-4">
                <div class="card shadow border-0">
                    <div class="card-body">
                        <h5 class="card-title text-maroon">Education</h5>
                        <p class="card-text">
                            <span class="career_text">
                            {{ profile.career|default:"Need to enter Career " }}
                            <button class="btn btn-link pencil open_modal" id="career" data-title="Career" data-placeholder="Enter your career">
                                <i class="bi bi-pencil"></i>
                            </button> 
                            </span>
                            at <span class="university_text">{{ profile.university|default:" and need to add university" }}
                                <button class="btn btn-link pencil open_modal" id="university" data-title="University" data-placeholder="Enter your university">
                                    <i class="bi bi-pencil"></i>
                                </button> 
                            </span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-5 mb-4">
                <div class="card shadow border-0">
                    <div class="card-body">
                        <h5 class="card-title text-maroon">Location</h5>
                        <p class="card-text location_text">
                            {{ profile.location|default:"Need to enter Current location" }}
                            <button class="btn btn-link pencil open_modal" id="location" data-title="location" data-placeholder="Enter your location">
                                <i class="bi bi-pencil"></i>
                            </button> 
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

<button class="confirm_edit_button">
    <a href="{% url 'profile' %}" class="confirm_edit_link">Confirm Edit</a>
</button>


<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Edit Profile</h2>

    <form enctype="multipart/form-data" action="/edit_pfp" method="post">
        {% csrf_token %}
        <div id="input_content" style="display:none;">
            <label for="name" class="pop_up_label">Edit:</label>
            <input type="text" id="text" name="name" class="pop_up_input text_line" placeholder="Enter" data-field="None">
            <textarea id="textarea" name="name" class="pop_up_input textarea" placeholder="Enter" data-field="None"></textarea>

            <div id="error-message" class="alert alert-danger" role="alert" style="display: none;"></div>

            <button type="submit" class="pop_up_button" id="submit_button">Save</button><br><br>
        </div>

        <div id="upload_content" style="display:none;">
            <input type="file" id="file" name="file">
            <button type="submit" class="pop_up_button" id="pop_up_file_button">Upload File</button>
        </div>

    </form>

  </div>
</div>


{% endblock %}

{% block javascript %}
    <script>
        let csrfToken = "{{ csrf_token }}";
    </script>
    <script src="{% static 'alumni/javascript/edit_profile.js' %}"></script>
{% endblock %}
